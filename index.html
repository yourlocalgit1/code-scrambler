<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Code Scrambler</title>
  <style>
    body {
      background: #0d1117;
      color: #e6edf3;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 0.5em;
    }
    .rack, .board {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 10px auto;
      gap: 6px;
    }
    .tile, .slot {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }
    .tile {
      background: #d32f2f;
      color: white;
      cursor: grab;
    }
    .slot {
      background: #2c2f33;
      border: 2px dashed #444;
      color: #e6edf3;
    }
    .slot.filled {
      background: #444;
      border: none;
      cursor: default;
    }
    button {
      background: #1f6feb;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      margin: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #388bfd;
    }
    #status {
      margin-top: 15px;
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <h1>CODE SCRAMBLER</h1>
  <p>Drag the letters into the grid to reveal the hidden phrase.  
  Hint: it's Latin — from the movie <i>Labyrinthus</i>.</p>

  <div>
    <button onclick="shuffle()">Shuffle</button>
    <button onclick="check()">Check</button>
    <button onclick="reveal()">Reveal</button>
  </div>

  <h3>Letter Rack</h3>
  <div class="rack" id="rack"></div>

  <h3>Board</h3>
  <div class="board" id="board"></div>

  <div id="status"></div>

  <script>
    // Target phrase (hidden with base64 so it’s not in plain text)
    const phrase = atob("SElDSU5DTEFTVVNWSVRBTVBFUkRJVFQ="); // HICINCLUSUSVITAMPERDIT
    const width = 9, height = 3, total = width * height;

    const letters = phrase.split("");
    const placeholders = Array(total - letters.length).fill('');
    const solution = [...letters, ...placeholders];

    const board = document.getElementById('board');
    const rack = document.getElementById('rack');
    const status = document.getElementById('status');

    // Build slots for the board
    for (let i = 0; i < total; i++) {
      const slot = document.createElement('div');
      slot.className = 'slot';
      slot.dataset.index = i;
      slot.ondrop = drop;
      slot.ondragover = allowDrop;
      board.appendChild(slot);
    }

    // Shuffle & populate rack
    function shuffle() {
      rack.innerHTML = '';
      const shuffled = [...letters].sort(() => Math.random() - 0.5);
      shuffled.forEach((ch, idx) => {
        const tile = document.createElement('div');
        tile.className = 'tile';
        tile.draggable = true;
        tile.innerText = ch;
        tile.id = 'tile' + idx;
        tile.ondragstart = drag;
        rack.appendChild(tile);
      });
    }

    function check() {
      const placed = Array.from(board.children).map(c => c.innerText || '');
      if (placed.join('') === solution.join('')) {
        status.innerText = "✅ Correct!";
      } else {
        status.innerText = "❌ Not quite—keep going!";
      }
    }

    function reveal() {
      board.innerHTML = '';
      solution.forEach((ch) => {
        const slot = document.createElement('div');
        slot.className = 'slot filled';
        slot.innerText = ch;
        board.appendChild(slot);
      });
    }

    function allowDrop(ev) { ev.preventDefault(); }
    function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }
    function drop(ev) {
      ev.preventDefault();
      const data = ev.dataTransfer.getData("text");
      const tile = document.getElementById(data);
      if (tile) {
        ev.target.innerText = tile.innerText;
        tile.remove();
      }
    }

    // Initial shuffle
    shuffle();
  </script>
</body>
</html>





